<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–§–æ—Ç–æ—à–∞—Ä–∏–Ω–≥</title>
</head>
<body>
  <h2>–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</h2>
  <input type="file" id="fileInput" />
  <button onclick="uploadImage()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
  <p id="linkOutput"></p>

  <script type="module">
    // üîª –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ–π –∫–æ–Ω—Ñ–∏–≥ Firebase ‚Üì
    const firebaseConfig = {
      apiKey: "–¢–í–û–ô_API_KEY",
      authDomain: "–¢–í–û–ô_–ü–†–û–ï–ö–¢.firebaseapp.com",
      projectId: "–¢–í–û–ô_–ü–†–û–ï–ö–¢",
      storageBucket: "–¢–í–û–ô_–ü–†–û–ï–ö–¢.appspot.com",
      messagingSenderId: "XXXXXX",
      appId: "1:XXXXXX:web:XXXXXX"
    };

    // –ü–æ–¥–∫–ª—é—á–∞–µ–º Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

    const app = initializeApp(firebaseConfig);
    const storage = getStorage(app);

    async function uploadImage() {
      const file = document.getElementById("fileInput").files[0];
      if (!file) {
        alert("–í—ã–±–µ—Ä–∏ —Ñ–∞–π–ª");
        return;
      }

      const storageRef = ref(storage, 'uploads/' + file.name);
      await uploadBytes(storageRef, file);
      const url = await getDownloadURL(storageRef);

      document.getElementById("linkOutput").innerHTML = `
        <p>–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ: <a href="${url}" target="_blank">${url}</a></p>
        <img src="${url}" style="max-width:300px; margin-top:10px;">
      `;
    }
  </script>
</body>
</html>
